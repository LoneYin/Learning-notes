(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{221:function(v,t,_){"use strict";_.r(t);var a=_(0),r=Object(a.a)({},(function(){var v=this,t=v.$createElement,_=v._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"浏览器的进程与线程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#浏览器的进程与线程"}},[v._v("#")]),v._v(" 浏览器的进程与线程")]),v._v(" "),_("h2",{attrs:{id:"浏览器进程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#浏览器进程"}},[v._v("#")]),v._v(" 浏览器进程")]),v._v(" "),_("p",[v._v("浏览器中的主要进程有")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("主进程（Browser Process)")]),v._v(" "),_("p",[v._v("负责浏览器界面的显示与交互。各个页面的管理，创建和销毁其他进程。网络的资源管理、下载等")]),v._v(" "),_("p",[v._v("主进程中有几个重要的线程")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("UI thread: 控制浏览器上的按钮及输入框")])]),v._v(" "),_("li",[_("p",[v._v("network thread: 处理网络请求，从网上获取数据 (输入url后拉取html给渲染进程渲染DOM树，在渲染进程创建DOM树的过程中也会拉取次级资源，如js，img，link)")])]),v._v(" "),_("li",[_("p",[v._v("storage thread: 控制文件等的访问")])])])]),v._v(" "),_("li",[_("p",[v._v("第三方插件进程 (Plugin Process)")]),v._v(" "),_("p",[v._v("每种类型的插件对应一个进程，仅当使用该插件时才创建")])]),v._v(" "),_("li",[_("p",[v._v("GPU 进程 (GPU Process)")]),v._v(" "),_("p",[v._v("最多只有一个，用于 3D 绘制等")])]),v._v(" "),_("li",[_("p",[v._v("渲染进程 (Renderer Process)")]),v._v(" "),_("p",[v._v("称为浏览器渲染进程或浏览器内核，内部是多线程的。主要负责页面渲染，脚本执行，事件处理等")])])]),v._v(" "),_("h2",{attrs:{id:"渲染进程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#渲染进程"}},[v._v("#")]),v._v(" 渲染进程")]),v._v(" "),_("p",[v._v("渲染进程中的线程有")]),v._v(" "),_("ul",[_("li",[v._v("GUI 渲染线程")]),v._v(" "),_("li",[v._v("JS 引擎线程")]),v._v(" "),_("li",[v._v("事件触发线程")]),v._v(" "),_("li",[v._v("定时器触发线程")]),v._v(" "),_("li",[v._v("异步 HTTP 请求线程")])]),v._v(" "),_("h3",{attrs:{id:"gui-渲染线程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#gui-渲染线程"}},[v._v("#")]),v._v(" GUI 渲染线程")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("负责渲染浏览器界面，解析 HTML，CSS，构建 DOM 树和 RenderObject 树，布局和绘制等")])]),v._v(" "),_("li",[_("p",[v._v("当界面需要重绘（Repaint）或由于某种操作引发回流(reflow)时，该线程就会执行")])]),v._v(" "),_("li",[_("p",[v._v("注意，GUI 渲染线程与 JS 引擎线程是互斥的，当构建 DOM 树时碰到 js 代码时就会切换至JS 引擎线，所以 JS 引擎执行时 GUI 线程会被挂起（相当于被冻结了），GUI 更新会被保存在一个队列中等到 JS 引擎空闲时立即被执行")])])]),v._v(" "),_("h3",{attrs:{id:"js-引擎线程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#js-引擎线程"}},[v._v("#")]),v._v(" JS 引擎线程")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("Javascript 引擎，也称为 JS 内核，负责处理 Javascript 脚本程序（例如 V8 引擎）")])]),v._v(" "),_("li",[_("p",[v._v("JS 引擎线程负责解析 Javascript 脚本，运行代码")])]),v._v(" "),_("li",[_("p",[v._v("JS 引擎一直等待着任务队列中任务的到来，然后加以处理，一个 Tab 页（renderer 进程）中无论什么时候都只有一个 JS 线程在运行 JS 程序")])]),v._v(" "),_("li",[_("p",[v._v("注意，GUI 渲染线程与 JS 引擎线程是互斥的，所以如果 JS 执行的时间过长，这样就会造成页面的渲染不连贯，导致页面渲染加载阻塞")])])]),v._v(" "),_("h3",{attrs:{id:"事件触发线程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#事件触发线程"}},[v._v("#")]),v._v(" 事件触发线程")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("归属于浏览器而不是 JS 引擎，用来控制事件循环（可以理解，JS 引擎自己都忙不过来，需要浏览器另开线程协助）")])]),v._v(" "),_("li",[_("p",[v._v("当 JS 引擎执行代码块如 setTimeOut 时（也可来自浏览器内核的其他线程，如鼠标点击、AJAX 异步请求等），会将对应任务添加到事件线程中")])]),v._v(" "),_("li",[_("p",[v._v("当对应的事件符合触发条件被触发时，该线程会把事件添加到待处理队列的队尾，等待 JS 引擎的处理")])]),v._v(" "),_("li",[_("p",[v._v("注意，由于 JS 的单线程关系，所以这些待处理队列中的事件都得排队等待 JS 引擎处理（当 JS 引擎空闲时才会去执行）")])])]),v._v(" "),_("h3",{attrs:{id:"定时器触发线程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#定时器触发线程"}},[v._v("#")]),v._v(" 定时器触发线程")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("setInterval 与 setTimeout 所在线程")])]),v._v(" "),_("li",[_("p",[v._v("浏览器定时计数器并不是由 JavaScript 引擎计数的，（因为 JavaScript 引擎是单线程的， 如果处于阻塞线程状态就会影响记计时的准确）")])]),v._v(" "),_("li",[_("p",[v._v("因此通过单独线程来计时并触发定时（计时完毕后，添加到事件队列中，等待 JS 引擎空闲后执行）")])]),v._v(" "),_("li",[_("p",[v._v("注意，W3C 在 HTML 标准中规定，规定要求 setTimeout 中低于 4ms 的时间间隔算为 4ms")])])]),v._v(" "),_("h3",{attrs:{id:"异步-http-请求线程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#异步-http-请求线程"}},[v._v("#")]),v._v(" 异步 HTTP 请求线程")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("在 XMLHttpRequest 在连接后是通过浏览器新开一个线程请求。")])]),v._v(" "),_("li",[_("p",[v._v("将检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件，将这个回调再放入事件队列中。再由 JavaScript 引擎执行。")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);