<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器的进程与线程 | 学习笔记</title>
    <meta name="description" content="构建自己的前端知识体系">
    
    
    <link rel="preload" href="/assets/css/0.styles.a4aa4dff.css" as="style"><link rel="preload" href="/assets/js/app.84f5df7b.js" as="script"><link rel="preload" href="/assets/js/2.ddf9653e.js" as="script"><link rel="preload" href="/assets/js/19.3f57e8de.js" as="script"><link rel="prefetch" href="/assets/js/10.ccf87d42.js"><link rel="prefetch" href="/assets/js/11.a53db162.js"><link rel="prefetch" href="/assets/js/12.64cedf27.js"><link rel="prefetch" href="/assets/js/13.b535b9cf.js"><link rel="prefetch" href="/assets/js/14.c83bc5cc.js"><link rel="prefetch" href="/assets/js/15.1d591647.js"><link rel="prefetch" href="/assets/js/16.8b4337e1.js"><link rel="prefetch" href="/assets/js/17.46a5b6d8.js"><link rel="prefetch" href="/assets/js/18.2ccb0372.js"><link rel="prefetch" href="/assets/js/20.f3c3e2a8.js"><link rel="prefetch" href="/assets/js/21.8baedc69.js"><link rel="prefetch" href="/assets/js/22.01f8765e.js"><link rel="prefetch" href="/assets/js/23.0e10acaa.js"><link rel="prefetch" href="/assets/js/24.21fe77b5.js"><link rel="prefetch" href="/assets/js/25.d1149e9e.js"><link rel="prefetch" href="/assets/js/26.b0b546d6.js"><link rel="prefetch" href="/assets/js/27.be067827.js"><link rel="prefetch" href="/assets/js/28.dfb2fa3a.js"><link rel="prefetch" href="/assets/js/29.f2384621.js"><link rel="prefetch" href="/assets/js/3.62ae8627.js"><link rel="prefetch" href="/assets/js/30.f7e309d4.js"><link rel="prefetch" href="/assets/js/4.554dccb8.js"><link rel="prefetch" href="/assets/js/5.8372670c.js"><link rel="prefetch" href="/assets/js/6.fd22e7cc.js"><link rel="prefetch" href="/assets/js/7.55ca8e68.js"><link rel="prefetch" href="/assets/js/8.e401c731.js"><link rel="prefetch" href="/assets/js/9.6cc258f0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a4aa4dff.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes/" class="nav-link router-link-active">笔记</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notes/" class="nav-link router-link-active">笔记</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>浏览器知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/browser/浏览器的进程与线程.html" class="active sidebar-link">浏览器的进程与线程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/browser/浏览器的进程与线程.html#浏览器进程" class="sidebar-link">浏览器进程</a></li><li class="sidebar-sub-header"><a href="/notes/browser/浏览器的进程与线程.html#渲染进程" class="sidebar-link">渲染进程</a></li></ul></li><li><a href="/notes/browser/浏览器的渲染原理.html" class="sidebar-link">浏览器的渲染原理</a></li><li><a href="/notes/browser/浏览器JS引擎.html" class="sidebar-link">浏览器JS引擎（V8）</a></li><li><a href="/notes/browser/浏览器EventLoop.html" class="sidebar-link">EventLoop</a></li><li><a href="/notes/browser/浏览器缓存策略.html" class="sidebar-link">浏览器缓存策略</a></li><li><a href="/notes/browser/跨域与页面通信.html" class="sidebar-link">跨域与页面通信</a></li><li><a href="/notes/browser/浏览器DOM事件与事件监听.html" class="sidebar-link">浏览器DOM事件与事件监听</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>网络知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/network/网络知识.html" class="sidebar-link">网络知识</a></li><li><a href="/notes/network/Web安全.html" class="sidebar-link">Web安全 —— XSS 与 CSRF</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/advanced/JS执行上下文栈.html" class="sidebar-link">JS执行上下文栈</a></li><li><a href="/notes/advanced/原型链与继承.html" class="sidebar-link">原型链继承</a></li><li><a href="/notes/advanced/Generator.html" class="sidebar-link">Generator</a></li><li><a href="/notes/advanced/Promise.html" class="sidebar-link">Promise</a></li><li><a href="/notes/advanced/Proxy.html" class="sidebar-link">Proxy</a></li><li><a href="/notes/advanced/节流和防抖.html" class="sidebar-link">函数的节流和防抖</a></li><li><a href="/notes/advanced/函数柯里化.html" class="sidebar-link">函数柯里化</a></li><li><a href="/notes/advanced/bind和call和apply.html" class="sidebar-link">bind-call-apply</a></li><li><a href="/notes/advanced/常见算法.html" class="sidebar-link">常见算法</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其他知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/others/模块加载机制.html" class="sidebar-link">模块加载机制</a></li><li><a href="/notes/others/前端性能优化.html" class="sidebar-link">前端性能优化</a></li><li><a href="/notes/others/移动端适配方案.html" class="sidebar-link">移动端适配方案</a></li><li><a href="/notes/others/Vue与React的区别.html" class="sidebar-link">Vue与React的区别</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>个人随笔</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/essay/vue源码阅读知识点整理.html" class="sidebar-link">Vue 源码阅读知识点整理</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="浏览器的进程与线程"><a href="#浏览器的进程与线程" class="header-anchor">#</a> 浏览器的进程与线程</h1> <h2 id="浏览器进程"><a href="#浏览器进程" class="header-anchor">#</a> 浏览器进程</h2> <p>浏览器中的主要进程有</p> <ul><li><p>主进程（Browser Process)</p> <p>负责浏览器界面的显示与交互。各个页面的管理，创建和销毁其他进程。网络的资源管理、下载等</p> <p>主进程中有几个重要的线程</p> <ul><li><p>UI thread: 控制浏览器上的按钮及输入框</p></li> <li><p>network thread: 处理网络请求，从网上获取数据 (输入url后拉取html给渲染进程渲染DOM树，在渲染进程创建DOM树的过程中也会拉取次级资源，如js，img，link)</p></li> <li><p>storage thread: 控制文件等的访问</p></li></ul></li> <li><p>第三方插件进程 (Plugin Process)</p> <p>每种类型的插件对应一个进程，仅当使用该插件时才创建</p></li> <li><p>GPU 进程 (GPU Process)</p> <p>最多只有一个，用于 3D 绘制等</p></li> <li><p>渲染进程 (Renderer Process)</p> <p>称为浏览器渲染进程或浏览器内核，内部是多线程的。主要负责页面渲染，脚本执行，事件处理等</p></li></ul> <h2 id="渲染进程"><a href="#渲染进程" class="header-anchor">#</a> 渲染进程</h2> <p>渲染进程中的线程有</p> <ul><li>GUI 渲染线程</li> <li>JS 引擎线程</li> <li>事件触发线程</li> <li>定时器触发线程</li> <li>异步 HTTP 请求线程</li></ul> <h3 id="gui-渲染线程"><a href="#gui-渲染线程" class="header-anchor">#</a> GUI 渲染线程</h3> <ul><li><p>负责渲染浏览器界面，解析 HTML，CSS，构建 DOM 树和 RenderObject 树，布局和绘制等</p></li> <li><p>当界面需要重绘（Repaint）或由于某种操作引发回流(reflow)时，该线程就会执行</p></li> <li><p>注意，GUI 渲染线程与 JS 引擎线程是互斥的，当构建 DOM 树时碰到 js 代码时就会切换至JS 引擎线，所以 JS 引擎执行时 GUI 线程会被挂起（相当于被冻结了），GUI 更新会被保存在一个队列中等到 JS 引擎空闲时立即被执行</p></li></ul> <h3 id="js-引擎线程"><a href="#js-引擎线程" class="header-anchor">#</a> JS 引擎线程</h3> <ul><li><p>Javascript 引擎，也称为 JS 内核，负责处理 Javascript 脚本程序（例如 V8 引擎）</p></li> <li><p>JS 引擎线程负责解析 Javascript 脚本，运行代码</p></li> <li><p>JS 引擎一直等待着任务队列中任务的到来，然后加以处理，一个 Tab 页（renderer 进程）中无论什么时候都只有一个 JS 线程在运行 JS 程序</p></li> <li><p>注意，GUI 渲染线程与 JS 引擎线程是互斥的，所以如果 JS 执行的时间过长，这样就会造成页面的渲染不连贯，导致页面渲染加载阻塞</p></li></ul> <h3 id="事件触发线程"><a href="#事件触发线程" class="header-anchor">#</a> 事件触发线程</h3> <ul><li><p>归属于浏览器而不是 JS 引擎，用来控制事件循环（可以理解，JS 引擎自己都忙不过来，需要浏览器另开线程协助）</p></li> <li><p>当 JS 引擎执行代码块如 setTimeOut 时（也可来自浏览器内核的其他线程，如鼠标点击、AJAX 异步请求等），会将对应任务添加到事件线程中</p></li> <li><p>当对应的事件符合触发条件被触发时，该线程会把事件添加到待处理队列的队尾，等待 JS 引擎的处理</p></li> <li><p>注意，由于 JS 的单线程关系，所以这些待处理队列中的事件都得排队等待 JS 引擎处理（当 JS 引擎空闲时才会去执行）</p></li></ul> <h3 id="定时器触发线程"><a href="#定时器触发线程" class="header-anchor">#</a> 定时器触发线程</h3> <ul><li><p>setInterval 与 setTimeout 所在线程</p></li> <li><p>浏览器定时计数器并不是由 JavaScript 引擎计数的，（因为 JavaScript 引擎是单线程的， 如果处于阻塞线程状态就会影响记计时的准确）</p></li> <li><p>因此通过单独线程来计时并触发定时（计时完毕后，添加到事件队列中，等待 JS 引擎空闲后执行）</p></li> <li><p>注意，W3C 在 HTML 标准中规定，规定要求 setTimeout 中低于 4ms 的时间间隔算为 4ms</p></li></ul> <h3 id="异步-http-请求线程"><a href="#异步-http-请求线程" class="header-anchor">#</a> 异步 HTTP 请求线程</h3> <ul><li><p>在 XMLHttpRequest 在连接后是通过浏览器新开一个线程请求。</p></li> <li><p>将检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件，将这个回调再放入事件队列中。再由 JavaScript 引擎执行。</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/notes/browser/浏览器的渲染原理.html">浏览器的渲染原理</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.84f5df7b.js" defer></script><script src="/assets/js/2.ddf9653e.js" defer></script><script src="/assets/js/19.3f57e8de.js" defer></script>
  </body>
</html>
