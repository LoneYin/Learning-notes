<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP/HTTPS/HTTP2 | 学习笔记</title>
    <meta name="description" content="构建自己的前端知识体系">
    
    
    <link rel="preload" href="/assets/css/0.styles.a4aa4dff.css" as="style"><link rel="preload" href="/assets/js/app.d90b1a7d.js" as="script"><link rel="preload" href="/assets/js/2.ddf9653e.js" as="script"><link rel="preload" href="/assets/js/34.79921d3e.js" as="script"><link rel="prefetch" href="/assets/js/10.2822c8d4.js"><link rel="prefetch" href="/assets/js/11.953eb217.js"><link rel="prefetch" href="/assets/js/12.08cd3bc9.js"><link rel="prefetch" href="/assets/js/13.3ea07363.js"><link rel="prefetch" href="/assets/js/14.08d3c49e.js"><link rel="prefetch" href="/assets/js/15.99b05918.js"><link rel="prefetch" href="/assets/js/16.9b87fae1.js"><link rel="prefetch" href="/assets/js/17.e263599c.js"><link rel="prefetch" href="/assets/js/18.a9e58c70.js"><link rel="prefetch" href="/assets/js/19.450252cb.js"><link rel="prefetch" href="/assets/js/20.67219f9a.js"><link rel="prefetch" href="/assets/js/21.83fb62ce.js"><link rel="prefetch" href="/assets/js/22.454161a4.js"><link rel="prefetch" href="/assets/js/23.cd0dc78c.js"><link rel="prefetch" href="/assets/js/24.62650fe5.js"><link rel="prefetch" href="/assets/js/25.5fa89824.js"><link rel="prefetch" href="/assets/js/26.69c19d16.js"><link rel="prefetch" href="/assets/js/27.014678fc.js"><link rel="prefetch" href="/assets/js/28.f12de4e4.js"><link rel="prefetch" href="/assets/js/29.7699ebd7.js"><link rel="prefetch" href="/assets/js/3.b0a6775b.js"><link rel="prefetch" href="/assets/js/30.9261d85c.js"><link rel="prefetch" href="/assets/js/31.57536ebb.js"><link rel="prefetch" href="/assets/js/32.a73b6dce.js"><link rel="prefetch" href="/assets/js/33.36884a86.js"><link rel="prefetch" href="/assets/js/35.f0f27945.js"><link rel="prefetch" href="/assets/js/36.2a08bebc.js"><link rel="prefetch" href="/assets/js/37.294494f7.js"><link rel="prefetch" href="/assets/js/38.20d8a33d.js"><link rel="prefetch" href="/assets/js/39.5bc82999.js"><link rel="prefetch" href="/assets/js/4.554dccb8.js"><link rel="prefetch" href="/assets/js/40.b64c9fda.js"><link rel="prefetch" href="/assets/js/41.ca3e1133.js"><link rel="prefetch" href="/assets/js/42.34bdf90e.js"><link rel="prefetch" href="/assets/js/5.7ec69b64.js"><link rel="prefetch" href="/assets/js/6.9a961699.js"><link rel="prefetch" href="/assets/js/7.7e6eebce.js"><link rel="prefetch" href="/assets/js/8.4a1300d9.js"><link rel="prefetch" href="/assets/js/9.5d664d52.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a4aa4dff.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes/" class="nav-link router-link-active">前端笔记</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notes/" class="nav-link router-link-active">前端笔记</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/browser/浏览器的进程与线程.html" class="sidebar-link">浏览器的进程与线程</a></li><li><a href="/notes/browser/浏览器的渲染原理.html" class="sidebar-link">浏览器的渲染原理</a></li><li><a href="/notes/browser/浏览器JS引擎.html" class="sidebar-link">浏览器JS引擎（V8）</a></li><li><a href="/notes/browser/浏览器EventLoop.html" class="sidebar-link">EventLoop</a></li><li><a href="/notes/browser/浏览器缓存策略.html" class="sidebar-link">浏览器缓存策略</a></li><li><a href="/notes/browser/跨域与页面通信.html" class="sidebar-link">跨域与页面通信</a></li><li><a href="/notes/browser/浏览器DOM事件与事件监听.html" class="sidebar-link">浏览器DOM事件与事件监听</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>网络知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/network/TCP与DNS.html" class="sidebar-link">TCP协议与DNS协议</a></li><li><a href="/notes/network/HTTP协议.html" class="active sidebar-link">HTTP/HTTPS/HTTP2</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/network/HTTP协议.html#http" class="sidebar-link">HTTP</a></li><li class="sidebar-sub-header"><a href="/notes/network/HTTP协议.html#https" class="sidebar-link">HTTPS</a></li><li class="sidebar-sub-header"><a href="/notes/network/HTTP协议.html#http2" class="sidebar-link">HTTP2</a></li></ul></li><li><a href="/notes/network/GET和POST请求的区别.html" class="sidebar-link">GET请求和POST请求的区别</a></li><li><a href="/notes/network/Web安全.html" class="sidebar-link">Web安全 —— XSS 与 CSRF</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/advanced/JS执行上下文栈.html" class="sidebar-link">JS执行上下文栈</a></li><li><a href="/notes/advanced/原型链与继承.html" class="sidebar-link">原型链继承</a></li><li><a href="/notes/advanced/Iterator和Generator.html" class="sidebar-link">Iterator和Generator</a></li><li><a href="/notes/advanced/Promise.html" class="sidebar-link">Promise</a></li><li><a href="/notes/advanced/Proxy.html" class="sidebar-link">Proxy</a></li><li><a href="/notes/advanced/节流和防抖.html" class="sidebar-link">函数的节流和防抖</a></li><li><a href="/notes/advanced/函数柯里化.html" class="sidebar-link">函数柯里化和偏函数</a></li><li><a href="/notes/advanced/bind和call和apply.html" class="sidebar-link">手写 bind/call/apply</a></li><li><a href="/notes/advanced/另一个角度理解this.html" class="sidebar-link">从另一个角度理解this</a></li><li><a href="/notes/advanced/闭包.html" class="sidebar-link">闭包</a></li><li><a href="/notes/advanced/常见算法.html" class="sidebar-link">常见算法</a></li><li><a href="/notes/advanced/单例模式.html" class="sidebar-link">JavaScript 中单例设计模式的应用</a></li><li><a href="/notes/advanced/观察者模式.html" class="sidebar-link">观察者模式的简单实现</a></li><li><a href="/notes/advanced/使用setTimeout模拟setInterval.html" class="sidebar-link">用 setTimeout 实现 setInterval</a></li><li><a href="/notes/advanced/new运算符.html" class="sidebar-link">new运算符到底做了什么</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其他知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/others/模块加载机制.html" class="sidebar-link">模块加载机制</a></li><li><a href="/notes/others/前端性能优化.html" class="sidebar-link">前端性能优化</a></li><li><a href="/notes/others/移动端适配方案.html" class="sidebar-link">移动端适配方案</a></li><li><a href="/notes/others/Vue与React的区别.html" class="sidebar-link">Vue与React的区别</a></li><li><a href="/notes/others/面试题整理.html" class="sidebar-link">一些JS面试题整理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>个人随笔</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/essay/给ReactRouter添加转场动画.html" class="sidebar-link">给React-Router添加路由页面切换时的过渡动画</a></li><li><a href="/notes/essay/Vue列表渲染中的key的作用.html" class="sidebar-link">key在Vue渲染列表时究竟起到了什么作用</a></li><li><a href="/notes/essay/vue源码阅读知识点整理.html" class="sidebar-link">Vue 源码阅读知识点整理</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="http-https-http2"><a href="#http-https-http2" class="header-anchor">#</a> HTTP/HTTPS/HTTP2</h1> <h2 id="http"><a href="#http" class="header-anchor">#</a> HTTP</h2> <h3 id="http-请求报文组成"><a href="#http-请求报文组成" class="header-anchor">#</a> HTTP 请求报文组成</h3> <ul><li>请求方法（GET/POST 等）</li> <li>URI</li> <li>协议版本 (HTTP/1.1)</li> <li>请求头</li> <li>请求体</li></ul> <h3 id="请求头字段"><a href="#请求头字段" class="header-anchor">#</a> 请求头字段</h3> <ul><li><p><strong>Accept</strong>：客户端能够处理的媒体类型。如 text/html, 表示客户端让服务器返回 html 类型的数据</p></li> <li><p><strong>Authorization</strong>：表示客户端的认证信息，jwt 中 token 存放于此</p></li> <li><p><strong>Host</strong>： 表示访问资源所在的主机名，即 URL 中的域名部分</p></li> <li><p><strong>Origin</strong>： 站点信息 如 baidu.com</p></li> <li><p><strong>Referer</strong>：告知服务器请求是从哪个页面发起的 如 baidu.com/xxx</p></li> <li><p><strong>User-Agent</strong>：将发起请求的浏览器和代理名称等信息发送给服务端</p></li> <li><p><strong>If-None-Match</strong>: If-Match 的值与所请求资源的 ETag 值不一致时服务器才处理此请求</p></li> <li><p><strong>If-Modified-Since</strong>: 用于确认客户端拥有的本地资源的时效性。 如果客户端请求的资源在 If-Modified-Since 指定的时间后发生了改变，则服务器处理该请求，失效了就返回新的</p></li> <li><p><strong>Range</strong>：获取部分资源，如视频流（服务器正确处理则返回 206 状态码）</p></li> <li><p>Accept-Charset: 表示客户端支持的字符集。例如：Accept-Charset: GB2312, ISO-8859-1</p></li> <li><p>Accept-Encoding： 表示客户端支持的内容编码格式。如：Accept-Encoding：gzip</p></li> <li><p>Accept-Language：表示客户端支持的语言。如：Accept-Language: zh-cn, en</p></li> <li><p>If-Match: If-Match 的值与所请求资源的 ETag 值（实体标记，与资源相关联。资源变化，实体标记跟着变化）一致时，服务器才处理此请求</p></li> <li><p>If-Unmodified-Since：与 If-Modified-Since 相反，表示请求的资源在指定的时间之后未发生变化时，才处理请求，否则返回 412</p></li> <li><p>If-Range： If-Range 的值（ETag 值或时间）与所访问资源的 ETag 值或时间相一致时，服务器处理此请求，并返回 Range 字段中设置的指定范围的数据。如果不一致，则返回所有内容 If-Range 其实算是 If-Match 的升级版，因为它的值不匹配时，依然能够返回数据，而 If-Match 不匹配时，请求不会被处理，需要数据时需再次进行请求</p></li> <li><p>Max-Forwards：表示请求可经过的服务器的最大数目，请求每被转发一次，Max-Forwards 减 1，当 Max-Forwards 为 0</p></li> <li><p>Cookie：属于请求型报文字段，在请求时添加Cookie, 以实现HTTP的状态记录</p></li></ul> <h3 id="http-响应报文组成"><a href="#http-响应报文组成" class="header-anchor">#</a> HTTP 响应报文组成</h3> <ul><li>方法</li> <li>URI</li> <li>协议版本</li> <li>响应头</li> <li>响应体</li></ul> <p>其中Url包括</p> <ul><li>protocal 协议头 比如http https ftp</li> <li>host  主机域名或ip地址</li> <li>port 端口号</li> <li>path 目录路径（路由）</li> <li>query 查询参数</li> <li>hash #后的哈希值</li></ul> <h3 id="响应头字段"><a href="#响应头字段" class="header-anchor">#</a> 响应头字段</h3> <p>CORS相关</p> <ul><li>Access-Control-Allow-Headers: 如 Authorization</li> <li>Access-Control-Allow-Methods: GET, OPTIONS, HEAD, PUT, POST</li> <li>Access-Control-Allow-Origin: 如 https://baidu.com</li> <li>Access-Control-Max-Age: 1800</li></ul> <p>普通响应头</p> <ul><li><p><strong>Content-Length</strong>：响应体的长度</p></li> <li><p><strong>Content-Range</strong>：在整个返回体中本部分的字节位置，对应Rnage</p></li> <li><p><strong>Content-Type</strong>：返回内容的MIME类型，对应Accept</p></li> <li><p><strong>ETag</strong>：请求变量的实体标签的当前值</p></li> <li><p><strong>Expires</strong>：响应过期的日期和时间</p></li> <li><p><strong>Last-Modified</strong>：请求资源的最后修改时间</p></li> <li><p>Accept-Ranges：表明服务器是否支持指定范围请求及哪种类型的分段请求</p></li> <li><p>Age：从原始服务器到代理缓存形成的估算时间（以秒计，非负）</p></li> <li><p>Allow：对某网络资源的有效的请求行为，不允许则返回405</p></li> <li><p>Content-Encoding：服务器支持的返回内容压缩编码类型</p></li> <li><p>Content-Language：响应体的语言</p></li> <li><p>Content-Location：请求资源可替代的备用的另一地址</p></li> <li><p>Content-MD5：返回资源的MD5校验值</p></li> <li><p>Location：用来重定向接收方到非请求URL的位置来完成请求或标识新的资源</p></li> <li><p>Pragma：包括实现特定的指令，它可应用到响应链上的任何接收方</p></li> <li><p>Proxy-Authenticate：它指出认证方案和可应用到代理的该URL上的参数</p></li> <li><p>refresh：应用于重定向或一个新的资源被创造，在5秒之后重定向（由网景提出，被大部分浏览器支持）</p></li> <li><p>Retry-After：如果实体暂时不可取，通知客户端在指定时间之后再次尝试</p></li> <li><p>Server：告知服务端当前使用的HTTP服务器应用程序的相关信息</p></li> <li><p>Set-Cookie：属于应答型报文字段。服务器给客户端传递Cookie信息时，就是通过此字段实现的</p></li></ul> <h3 id="通用头部字段"><a href="#通用头部字段" class="header-anchor">#</a> 通用头部字段</h3> <ul><li><p><strong>Cache-Control</strong>：控制缓存行为（max-age/no-cache/no-store）</p></li> <li><p><strong>Connection</strong>：管理持久连接，设置其值为Keep-Alive可实现长连接</p></li> <li><p>Via：追踪客户端和服务端之间的报文的传输路径，还可避免会环的发生，所以在经过代理时必须添加此字段</p></li> <li><p>Transfer-Encoding：规定了传输报文主题时使用的传输编码，如Transfer-Encoding: chunked</p></li> <li><p>Date：创建HTTP报文的日期和时间</p></li> <li><p>Pragma：Http/1.1之前的历史遗留字段，仅作为HTTP/1.0向后兼容而定义，虽然是通用字段，当通常被使用在客户单的请求中，如Pragma: no-cache, 表示客户端在请求过程中不循序服务端返回缓存的数据</p></li> <li><p>Upgrade: 用于检查HTTP协议或其他协议是否有可使用的更高版本</p></li> <li><p>Warning：Http/1.1的报文字段，从Http/1.0的AfterRetry演变而来，用来告知用户一些与缓存相关的警告信息</p></li></ul> <h3 id="http状态码"><a href="#http状态码" class="header-anchor">#</a> HTTP状态码</h3> <h4 id="_2xx-成功"><a href="#_2xx-成功" class="header-anchor">#</a> 2XX 成功</h4> <ul><li>200 OK，表示从客户端发来的请求在服务器端被正确处理</li> <li>204 No content，表示请求成功，但响应报文不含实体的主体部分</li> <li>206 Partial Content，进行范围请求（请求实体部分内容成功）</li></ul> <h4 id="_3xx-重定向"><a href="#_3xx-重定向" class="header-anchor">#</a> 3XX 重定向</h4> <ul><li>301 moved permanently，永久性重定向，表示资源已被分配了新的 URL</li> <li>302 found，临时性重定向，表示资源临时被分配了新的 URL</li> <li>303 see other，表示资源存在着另一个 URL，应使用 GET 方法定向获取资源</li> <li>304 not modified，表示服务器允许访问资源，但因发生请求未满足条件的情况(一般是命中了缓存)</li></ul> <h4 id="_4xx-客户端错误"><a href="#_4xx-客户端错误" class="header-anchor">#</a> 4XX 客户端错误</h4> <ul><li>400 bad request，请求报文存在语法错误</li> <li>401 unauthorized，表示发送的请求需要有通过 HTTP 认证的认证信息</li> <li>403 forbidden，表示对请求资源的访问被服务器拒绝</li> <li>404 not found，表示在服务器上没有找到请求的资源</li></ul> <h4 id="_5xx-服务器错误"><a href="#_5xx-服务器错误" class="header-anchor">#</a> 5XX 服务器错误</h4> <ul><li>500 internal sever error，表示服务器端在执行请求时发生了错误</li> <li>502 bad gateway，错误网关，一般是服务器网络错误</li> <li>503 service unavailable，表明服务器暂时处于超负载或正在停机维护，无法处理请求</li></ul> <h2 id="https"><a href="#https" class="header-anchor">#</a> HTTPS</h2> <p>现在一般使用的是 TLS（基于 RSA 非对称加密）</p> <p>TLS(Transport Layer Secure 传输层安全)1.0 === SSL(Secure Socket Layer 安全套接层)3.0</p> <h3 id="握手流程（包含-pre-master-secret）"><a href="#握手流程（包含-pre-master-secret）" class="header-anchor">#</a> 握手流程（包含 Pre-Master Secret）</h3> <ol><li><p>浏览器给出协议版本号、一个客户端生成的随机数（Client Random），以及客户端支持的加密方法，发出安全请求。</p></li> <li><p>web 服务器确认双方使用的加密方法，并给出数字证书（包含服务器的<strong>公钥</strong>）、以及一个服务器生成的随机数（Server Random）。</p></li> <li><p>浏览器通过预置的 CA 列表确认数字证书有效（这一步使得中间人没法造假），然后生成一个新的随机数（Pre-Master Secret），并使用数字证书中的<strong>公钥</strong>加密这个随机数，发给 web 服务器。</p></li> <li><p>web 服务器使用自己的<strong>私钥</strong>，获取浏览器发来的随机数（即 Pre-Master Secret），非对称加密部分完结。</p></li> <li><p>浏览器和 web 服务器根据约定的加密方法，使用前面的三个随机数，生成对称秘钥&quot;对话密钥&quot;（Session Key），用来加密接下来的整个对话过程。</p></li></ol> <h2 id="http2"><a href="#http2" class="header-anchor">#</a> HTTP2</h2> <ol><li><strong>新的二进制格式</strong>： HTTP1.x 的解析是基于文本。基于文本协议的格式解析存在天然缺陷，文本的表现形式有多样性，要做到健壮性考虑的场景必然很多，二进制则不同，只认 0 和 1 的组合。基于这种考虑 HTTP2.0 的协议解析决定采用二进制格式，实现方便且健壮。</li> <li><strong>多路复用</strong>：即连接共享，HTTP2.0 多个请求可同时在一个连接上并行执行。某个请求任务耗时严重，不会影响到其它连接的正常执行，HTTP1.x 则可能会因为一个请求超时而发生线头阻塞。</li> <li><strong>header 压缩</strong>：HTTP1.x 的 header 带有大量信息，而且每次都要重复发送，HTTP2.0 使用 encoder 来减少需要传输的 header 大小，通讯双方各自 cache 一份 header fields 表，既避免了重复 header 的传输，又减小了需要传输的大小。</li> <li><strong>服务端推送</strong>：服务端推送能把客户端所需要许多资源随着单次请求一起发送到客户端，省去了客户端重复请求的步骤</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/network/TCP与DNS.html" class="prev">TCP协议与DNS协议</a></span> <span class="next"><a href="/notes/network/GET和POST请求的区别.html">GET请求和POST请求的区别</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d90b1a7d.js" defer></script><script src="/assets/js/2.ddf9653e.js" defer></script><script src="/assets/js/34.79921d3e.js" defer></script>
  </body>
</html>
